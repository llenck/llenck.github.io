<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Binance.Api</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">binance-api-0.1.2.1: read-only incomplete Haskell bindings for the Binance API</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>License</th><td>AGPL</td></tr><tr><th>Maintainer</th><td>lialenck@protonmail.com, github.com/llenck</td></tr><tr><th>Stability</th><td>Idk lmao</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Binance.Api</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Contains a few useful functions for fetching data from the Binance API.</p><p>The main things to look at are <code><a href="Binance-Api.html#v:getRates" title="Binance.Api">getRates</a></code> and <code><a href="Binance-Api.html#v:getRatesMap" title="Binance.Api">getRatesMap</a></code> for Exchange rates,
and <code><a href="Binance-Api.html#v:getAssets" title="Binance.Api">getAssets</a></code> and <code><a href="Binance-Api.html#v:getOrders" title="Binance.Api">getOrders</a></code> for information about your account (these
require a secret key).</p><p>All the functions that require both keys take the secret key first, and the
regular key second.</p><p>This Module makes heavy use of <code>Rational</code>s for representing numbers given by
the binance API. If you're gonna do a lot of computations on these numbers,
converting them to a floating-point type using <code>fromRational</code> is recommended.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:CoinInfo">CoinInfo</a> = <a href="#v:CoinInfo">CoinInfo</a> {<ul class="subs"><li><a href="#v:coinTicker">coinTicker</a> :: String</li><li><a href="#v:coinFree">coinFree</a> :: Rational</li><li><a href="#v:coinFrozen">coinFrozen</a> :: Rational</li><li><a href="#v:coinLocked">coinLocked</a> :: Rational</li><li><a href="#v:coinName">coinName</a> :: String</li></ul>}</li><li class="src short"><a href="#v:getAssets">getAssets</a> :: ByteString -&gt; ByteString -&gt; IO (Either String [<a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a>])</li><li class="src short"><a href="#v:coinSum">coinSum</a> :: <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a> -&gt; Rational</li><li class="src short"><span class="keyword">data</span> <a href="#t:ExchangeRate">ExchangeRate</a> = <a href="#v:ExchangeRate">ExchangeRate</a> {<ul class="subs"><li><a href="#v:exSymbol">exSymbol</a> :: String</li><li><a href="#v:exRate">exRate</a> :: Rational</li></ul>}</li><li class="src short"><a href="#v:getRates">getRates</a> :: ByteString -&gt; IO (Either String [<a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a>])</li><li class="src short"><a href="#v:getRatesMap">getRatesMap</a> :: ByteString -&gt; IO (Either String (String -&gt; String -&gt; Either String Rational))</li><li class="src short"><span class="keyword">data</span> <a href="#t:OrderInfo">OrderInfo</a> = <a href="#v:OrderInfo">OrderInfo</a> {<ul class="subs"><li><a href="#v:ordSymbol">ordSymbol</a> :: String</li><li><a href="#v:ordPrice">ordPrice</a> :: Rational</li><li><a href="#v:ordOrigQty">ordOrigQty</a> :: Rational</li><li><a href="#v:ordExecutedQty">ordExecutedQty</a> :: Rational</li><li><a href="#v:ordStatus">ordStatus</a> :: String</li><li><a href="#v:ordType">ordType</a> :: String</li><li><a href="#v:ordSide">ordSide</a> :: String</li><li><a href="#v:ordTime">ordTime</a> :: UTCTime</li></ul>}</li><li class="src short"><a href="#v:getOrders">getOrders</a> :: ByteString -&gt; ByteString -&gt; IO (Either String [<a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a>])</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CoinInfo" class="def">CoinInfo</a> <a href="#t:CoinInfo" class="selflink">#</a></p><div class="doc"><p>Information about the amount of a coin that you posess.</p><p><code><a href="Binance-Api.html#v:coinFree" title="Binance.Api">coinFree</a></code> is what you can directly use, and <code><a href="Binance-Api.html#v:coinLocked" title="Binance.Api">coinLocked</a></code> is the amount reserved
 for orders. I don't know what <code><a href="Binance-Api.html#v:coinFrozen" title="Binance.Api">coinFrozen</a></code> does.</p><p>To get the total amount, you can use <code><a href="Binance-Api.html#v:coinSum" title="Binance.Api">coinSum</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CoinInfo" class="def">CoinInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:coinTicker" class="def">coinTicker</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:coinFree" class="def">coinFree</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:coinFrozen" class="def">coinFrozen</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:coinLocked" class="def">coinLocked</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:coinName" class="def">coinName</a> :: String</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:CoinInfo">Instances</h4><details id="i:CoinInfo" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CoinInfo:FromJSON:1"></span> FromJSON <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a></span> <a href="#t:CoinInfo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CoinInfo:FromJSON:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Binance-Api.html">Binance.Api</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:parseJSON">parseJSON</a> :: Value -&gt; Parser <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a></p><p class="src"><a href="#v:parseJSONList">parseJSONList</a> :: Value -&gt; Parser [<a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a>]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CoinInfo:Show:2"></span> Show <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a></span> <a href="#t:CoinInfo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CoinInfo:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Binance-Api.html">Binance.Api</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getAssets" class="def">getAssets</a> :: ByteString -&gt; ByteString -&gt; IO (Either String [<a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a>]) <a href="#v:getAssets" class="selflink">#</a></p><div class="doc"><p>Uses your secret key and regular API key to fetch your assets:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.ByteString.Char8 (pack)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>getAssets (pack &quot;private API key&quot;) (pack &quot;regular API key&quot;)
</code></strong>Right [CoinInfo {coinTicker = &quot;ETH&quot;, coinFree = 1 % 2, coinFree = 0 % 1, coinLocked = 0 % 1, coinName = &quot;Ethereum&quot;}]
</pre><p>This only fetches assets from your spot account, as the API for staked assets got added
 very recently, and I haven't implemented that API yet.</p></div></div><div class="top"><p class="src"><a id="v:coinSum" class="def">coinSum</a> :: <a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a> -&gt; Rational <a href="#v:coinSum" class="selflink">#</a></p><div class="doc"><p>Sums up <code><a href="Binance-Api.html#v:coinFree" title="Binance.Api">coinFree</a></code>, <code><a href="Binance-Api.html#v:coinFrozen" title="Binance.Api">coinFrozen</a></code> and <code><a href="Binance-Api.html#v:coinLocked" title="Binance.Api">coinLocked</a></code> for a <code><a href="Binance-Api.html#t:CoinInfo" title="Binance.Api">CoinInfo</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ExchangeRate" class="def">ExchangeRate</a> <a href="#t:ExchangeRate" class="selflink">#</a></p><div class="doc"><p>Most recent exchange rate for a pair of coins.
 <code><a href="Binance-Api.html#v:exSymbol" title="Binance.Api">exSymbol</a></code> has a value of the coins concatenated; This is not nice to work
 with, but the API only uses this format. For example, if an Ether was
 worth 2000 USDT, this would be represented as:</p><pre>ExchangeRate {exSymbol = &quot;ETHUSDT&quot;, exRate = 2000 % 1}</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ExchangeRate" class="def">ExchangeRate</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:exSymbol" class="def">exSymbol</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:exRate" class="def">exRate</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ExchangeRate">Instances</h4><details id="i:ExchangeRate" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ExchangeRate:FromJSON:1"></span> FromJSON <a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a></span> <a href="#t:ExchangeRate" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ExchangeRate:FromJSON:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Binance-Api.html">Binance.Api</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:parseJSON">parseJSON</a> :: Value -&gt; Parser <a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a></p><p class="src"><a href="#v:parseJSONList">parseJSONList</a> :: Value -&gt; Parser [<a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a>]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ExchangeRate:Show:2"></span> Show <a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a></span> <a href="#t:ExchangeRate" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ExchangeRate:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Binance-Api.html">Binance.Api</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getRates" class="def">getRates</a> :: ByteString -&gt; IO (Either String [<a href="Binance-Api.html#t:ExchangeRate" title="Binance.Api">ExchangeRate</a>]) <a href="#v:getRates" class="selflink">#</a></p><div class="doc"><p>This fetches all the exchange rates, and returns them in a List. If you just want
 to look up specific exchange rates, <code><a href="Binance-Api.html#v:getRatesMap" title="Binance.Api">getRatesMap</a></code> is probably a better match for you.</p></div></div><div class="top"><p class="src"><a id="v:getRatesMap" class="def">getRatesMap</a> :: ByteString -&gt; IO (Either String (String -&gt; String -&gt; Either String Rational)) <a href="#v:getRatesMap" class="selflink">#</a></p><div class="doc"><p>This fetches all the exchange rates on binance, and returns a function which
 you can use to look up pretty much all pairs of coins (if there's not an
 entry for a pair, the function will try to go though USDT before failing).</p><p>This builds a strict <code>HashMap</code> from <code><a href="Binance-Api.html#v:getRates" title="Binance.Api">getRates</a></code>, and partially applies a lookup
 function that tries to indirectly look exchange rates up.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.ByteString.Char8 (pack)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(Right getRate) &lt;- getRatesMap $ pack &quot;regular API key&quot;
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromRational &lt;$&gt; getRate &quot;ETH&quot; &quot;USDT&quot;
</code></strong>Right 2925.42
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromRational &lt;$&gt; lookupRate &quot;Blub&quot; &quot;Wubbel&quot;
</code></strong>Left &quot;Couldn't convert Blub -&gt; Wubbel&quot;
</pre></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OrderInfo" class="def">OrderInfo</a> <a href="#t:OrderInfo" class="selflink">#</a></p><div class="doc"><p>Represents an open order. For the meaning of non-self-explanatory fields see
 the binance API documentation.</p><p>A lot of fields are left out here, as I didn't need/understand them, but
 they're very easy to add, if you need them.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:OrderInfo" class="def">OrderInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ordSymbol" class="def">ordSymbol</a> :: String</dfn><div class="doc"><p>The pair, in the same format as <code><a href="Binance-Api.html#v:exSymbol" title="Binance.Api">exSymbol</a></code></p></div></li><li><dfn class="src"><a id="v:ordPrice" class="def">ordPrice</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ordOrigQty" class="def">ordOrigQty</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ordExecutedQty" class="def">ordExecutedQty</a> :: Rational</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ordStatus" class="def">ordStatus</a> :: String</dfn><div class="doc"><p>this should be an enum, but idk about possible values</p></div></li><li><dfn class="src"><a id="v:ordType" class="def">ordType</a> :: String</dfn><div class="doc"><p>same for this field</p></div></li><li><dfn class="src"><a id="v:ordSide" class="def">ordSide</a> :: String</dfn><div class="doc"><p>and this field</p></div></li><li><dfn class="src"><a id="v:ordTime" class="def">ordTime</a> :: UTCTime</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:OrderInfo">Instances</h4><details id="i:OrderInfo" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:OrderInfo:FromJSON:1"></span> FromJSON <a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a></span> <a href="#t:OrderInfo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:OrderInfo:FromJSON:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Binance-Api.html">Binance.Api</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:parseJSON">parseJSON</a> :: Value -&gt; Parser <a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a></p><p class="src"><a href="#v:parseJSONList">parseJSONList</a> :: Value -&gt; Parser [<a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a>]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:OrderInfo:Show:2"></span> Show <a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a></span> <a href="#t:OrderInfo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:OrderInfo:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Binance-Api.html">Binance.Api</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getOrders" class="def">getOrders</a> :: ByteString -&gt; ByteString -&gt; IO (Either String [<a href="Binance-Api.html#t:OrderInfo" title="Binance.Api">OrderInfo</a>]) <a href="#v:getOrders" class="selflink">#</a></p><div class="doc"><p>Uses your secret key and regular API key to fetch your open orders:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.ByteString.Char8 (pack)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>getOrders (pack &quot;private API key&quot;) (pack &quot;regular API key&quot;)
</code></strong>Right [OrderInfo {ordSymbol = &quot;ALGOUSDT&quot;, ordPrice = 1 % 2, ordOrigQty = 22 % 1, ordExecutedQty = 0 % 1, ordStatus = &quot;NEW&quot;, ordType = &quot;LIMIT&quot;, ordSide = &quot;SELL&quot;, ordTime = 2022-05-18 08:32:14 UTC}]
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.25.1</p></div></body></html>